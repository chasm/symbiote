{"version":3,"file":"/packages/meteor-fixture.js","sources":["meteor-fixture/meteor-fixture.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,iB;;AAEA,a;;AAEA,c;AACA,iB;;AAEA,2G;AACA,qD;AACA,4B;AACA,8D;AACA,uD;AACA,gB;AACA,qD;AACA,S;AACA,4C;AACA,+B;AACA,yC;AACA,mE;AACA,kC;AACA,6C;AACA,sB;AACA,W;AACA,M;;AAEA,8C;;AAEA,+B;AACA,oC;AACA,yC;AACA,8C;AACA,wC;AACA,gC;AACA,U;;AAEA,+D;AACA,mD;AACA,W;AACA,M;;AAEA,8B;AACA,iC;AACA,K;;;AAGA,K","sourcesContent":["/*jshint -W020 */\n\nFixture = {};\n\n(function () {\n    \"use strict\";\n\n    // You can access this from your own fixture.js so you can create routes for selenium to do things with\n    Fixture.createRoute = function (route, handler) {\n        var connectHandlers;\n        if (typeof __meteor_bootstrap__.app !== 'undefined') {\n            connectHandlers = __meteor_bootstrap__.app;\n        } else {\n            connectHandlers = WebApp.connectHandlers;\n        }\n        connectHandlers.stack.splice(0, 0, {\n            route: '/' + route,\n            handle: function (req, res) {\n                res.writeHead(200, {'Content-Type': 'text/plain'});\n                handler(req, res);\n                res.end(route + ' complete');\n            }.future()\n        });\n    };\n\n    var createEmailInterceptor = function () {\n\n        var emailMessages = [],\n            actualSend = Email.send;\n        Email.send = function (options) {\n            options.id = emailMessages.length;\n            emailMessages.push(options);\n            actualSend(options);\n        };\n\n        Fixture.createRoute('showEmails', function (req, res) {\n            res.end(JSON.stringify(emailMessages));\n        });\n    };\n\n    if (Email !== undefined) {\n        createEmailInterceptor();\n    }\n\n\n})();"]}